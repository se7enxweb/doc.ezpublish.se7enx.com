                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=31431852 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:58:43 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpage66bf.html?pageId=31431852" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/6/_/styles/colors74cd.css?spaceKey=DEVELOPER" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/6/_/styles/custom74cd.css?spaceKey=DEVELOPER" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <div class="contentLayout2">
<div class="columnLayout two-right-sidebar" data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p> </p><p> </p><p><img class="confluence-embedded-image image-center" height="400" confluence-query-params="effects=border-simple,blur-border" src="../../download/attachments/31431852/Beginners_Tutorial-Ride-viewaaeb.jpg?version=1&amp;modificationDate=1462797477000&amp;api=v2&amp;effects=border-simple,blur-border" data-image-src="/download/attachments/31431852/Beginners_Tutorial-Ride-view.png?version=1&amp;modificationDate=1462797477000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="31431849" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Beginners_Tutorial-Ride-view.png" data-base-url="https://doc.ez.no" data-linked-resource-content-type="image/png" data-linked-resource-container-id="31431852" data-linked-resource-container-version="36" title="Developer > Step 1 - Display content of a Ride > Beginners_Tutorial-Ride-view.png" data-location="Developer > Step 1 - Display content of a Ride > Beginners_Tutorial-Ride-view.png" data-image-height="961" data-image-width="1904"></p><p>Now let's inject and display all Points of interest within the view.</p><p><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macro5cea.png?definition=e3RvYzpvdXRsaW5lPXRydWV8c3R5bGU9bm9uZX0&amp;locale=en_GB&amp;version=2" data-macro-name="toc" data-macro-id="88807d3e-4fa1-4eeb-9f6a-5d5592acf449" data-macro-parameters="outline=true|style=none" data-macro-schema-version="1"></p><h1>Creating the Ride view</h1><p>Create a Twig template app/Resources/views/full/ride.html.twig and paste into it the following HTML and Twig tags:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="0f517f68-887d-44e9-958d-79e85aa28b61" data-macro-parameters="language=xml|title=ride.html.twig" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading012c.png?definition=e2NvZGU6bGFuZ3VhZ2U9eG1sfHRpdGxlPXJpZGUuaHRtbC50d2lnfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>{% extends "pagelayout.html.twig" %}
{% block content %}
  &lt;section>
    &lt;div class="container">
      &lt;div class="row regular-content-size">
        &lt;div class="col-xs-10 col-xs-offset-1 row-padding">
          &lt;div class="col-xs-12">
            &lt;div class="col-xs-1 text-left">
              &lt;h2>Ride:&lt;/h2>
            &lt;/div>
            &lt;div class="col-xs-11 text-left">
              &lt;h2 class="extra-padding-left">{{ ez_content_name( content ) }}&lt;/h2>
            &lt;/div>
          &lt;/div>
        &lt;/div>
      &lt;/div>
    &lt;/div>
  &lt;/section>
  &lt;section>
    &lt;div id="map-container">
      {{ ez_render_field(content, 'starting_point', {'parameters': { 'height': '330px', 'showMap': true, 'showInfo': false }}
      ) }}
    &lt;/div>
  &lt;/section>
  &lt;section>
    &lt;div class="container">
      &lt;div class="row regular-content-size">
        &lt;div class="col-xs-10 col-xs-offset-1 padding-box">
          &lt;div class="col-xs-2">
            &lt;div class="box-ride">
              &lt;h3 class="special-number">{{ ez_render_field( content, 'length') }} Km&lt;/h3>
              &lt;p class="pre-small special-number special-number-margin">&lt;strong>{{ 'Level' }}&lt;/strong>&lt;/p>
            &lt;/div>
          &lt;/div>
          &lt;div class="col-xs-10">
            &lt;div class="col-xs-5">
              &lt;p>Created by: {{ ez_field_value( content, 'author') }}&lt;/p>
              &lt;p>Start: {{ ez_field_value(content, 'starting_point') }}
              &lt;/p>
              &lt;p>End: {{ ez_field_value(content, 'ending_point') }}&lt;/p>
            &lt;/div>
          &lt;/div>
        &lt;/div>
        &lt;div class="col-xs-10 col-xs-offset-1 padding-box">
          &lt;div class="col-xs-10">
            &lt;div class="col-xs-2 text-right">
              &lt;p>Description:&lt;/p>
            &lt;/div>
            &lt;div class="col-xs-10 text-justify">
              {{ ez_render_field( content, 'description') }}
            &lt;/div>
          &lt;/div>
        &lt;/div>
      &lt;/div>
    &lt;/div>
  &lt;/section>
{% endblock %} </pre></td></tr></table><h3>What is in this template ?</h3><p>You reuse your pagelayout.html.twig template, to have the menu, footer and CSS.</p><p>The Ride template is in a block and you use the Twig helpers to render the content of a Ride</p><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="243aab1e-62a8-428e-a795-3d6283ca4f9c" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>See the <a class="confluence-link" href="../../display/DEVELOPER/Twig%2bFunctions%2bReference.html" data-linked-resource-id="32114025" data-linked-resource-version="2" data-linked-resource-type="page" data-linked-resource-default-alias="Twig Functions Reference" data-base-url="../../index.html">Twig Functions Reference</a> for more information on Twig helpers</p></td></tr></table><table class="wysiwyg-macro" data-macro-name="note" data-macro-id="16a1ca47-e9aa-4961-ba80-a9177df9501b" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingdd57.png?definition=e25vdGV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body">Note: the Level Field is static for now and uses the translation capacity.</td></tr></table><p>The Starting Point and Ending Point Google Maps rendering is not yet done. You will use the <a class="confluence-link" href="../../display/DEVELOPER/MapLocation%2bField%2bType.html" data-linked-resource-id="31430523" data-linked-resource-version="9" data-linked-resource-type="page" data-linked-resource-default-alias="MapLocation Field Type" data-base-url="../../index.html">MapLocation Field Type</a> to render this Content Type.</p><h2>Add a new parameter to your override rule</h2><p>We still haven't set any matching rule for our new Content Type Ride, so let's add one that will render a specific template for a Ride Content Type. </p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="e07d142d-b04f-46b0-a724-d42b06377c15" data-macro-parameters="language=bash|title=ezplatform.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading510d.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaHx0aXRsZT1lenBsYXRmb3JtLnltbH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>default:
    content_view:
        full:
            full_ride:
                template: "full/ride.html.twig"
                match:
                    Identifier\ContentType: "ride"</pre></td></tr></table><h2>Check the Ride full view</h2><h3>Preview in the Admin</h3><p>You can use the Preview while Editing in the Admin to preview your content rendered in the full view.</p><p><img class="confluence-embedded-image confluence-content-image-border image-center" height="250" width="505" src="../../download/attachments/31431852/Admin-preview-full-ride7472.png?version=1&amp;modificationDate=1469623959000&amp;api=v2" data-image-src="/download/attachments/31431852/Admin-preview-full-ride.png?version=1&amp;modificationDate=1469623959000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="32114375" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Admin-preview-full-ride.png" data-base-url="https://doc.ez.no" data-linked-resource-content-type="image/png" data-linked-resource-container-id="31431852" data-linked-resource-container-version="36" title="Developer > Step 1 - Display content of a Ride > Admin-preview-full-ride.png" data-location="Developer > Step 1 - Display content of a Ride > Admin-preview-full-ride.png" data-image-height="922" data-image-width="1861"><table class="wysiwyg-macro" data-macro-name="excerpt" data-macro-id="04b548f0-8e13-40d7-b84a-13795899ca0a" data-macro-parameters="atlassian-macro-output-type=INLINE" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7e02.png?definition=e2V4Y2VycHQ6YXRsYXNzaWFuLW1hY3JvLW91dHB1dC10eXBlPUlOTElORX0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><h3>Go to the Ride page</h3><p>You can also go the the URL of the content. It is a URL like this one <strong>http://127.0.0.1:8000/view/content/53/eng-GB/full/true/55</strong> where 53 is the Content ID and 55 is the Location ID of my Ride.<br />The infos in the URL are http://&lt;yourhost&gt;/view/content/&lt;ContentId&gt;/&lt;language&gt;/full/true/&lt;LocationId&gt;</p><p>You will find the Content ID and the Location ID of your Ride in the Admin, under the Details tab.</p></td></tr></table> </p><p><img class="confluence-embedded-image image-center" height="400" width="807" confluence-query-params="effects=border-simple,blur-border" src="../../download/attachments/31431852/details_tab_for_locationid6674.jpg?version=1&amp;modificationDate=1469623815000&amp;api=v2&amp;effects=border-simple,blur-border" data-image-src="/download/attachments/31431852/details_tab_for_locationid.png?version=1&amp;modificationDate=1469623815000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="32114372" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="details_tab_for_locationid.png" data-base-url="https://doc.ez.no" data-linked-resource-content-type="image/png" data-linked-resource-container-id="31431852" data-linked-resource-container-version="36" title="Developer > Step 1 - Display content of a Ride > details_tab_for_locationid.png" data-location="Developer > Step 1 - Display content of a Ride > details_tab_for_locationid.png" data-image-height="922" data-image-width="1861"></p><h1>Points Of Interest</h1><p>Go to Admin Panel &gt; Content Types, and under the &quot;Content&quot;  group, create the Point Of Interest Content Type.</p><p><img class="confluence-embedded-image image-left" src="../../download/attachments/31431852/Button-create-content-typee3c4.png?version=1&amp;modificationDate=1482170920000&amp;api=v2" data-image-src="/download/attachments/31431852/Button-create-content-type.png?version=1&amp;modificationDate=1482170920000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="32869547" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Button-create-content-type.png" data-base-url="https://doc.ez.no" data-linked-resource-content-type="image/png" data-linked-resource-container-id="31431852" data-linked-resource-container-version="36" title="Developer > Step 1 - Display content of a Ride > Button-create-content-type.png" data-location="Developer > Step 1 - Display content of a Ride > Button-create-content-type.png" data-image-height="57" data-image-width="201"></p><p> </p><p> </p><h2>Create the Point Of Interest (POI) Content Type</h2><p>A geographical location rides go through. Each ride may be related to as many points of interest as needed.</p><p style="margin-left: 60.0px;"><strong>Name</strong>: Point of interest<br /><strong>Identifier</strong>: point_of_interest<br /><strong>Content name pattern</strong>: &lt;name&gt; </p><p> </p><p>Then create all fields with the following information: </p><ul><li><strong>Name</strong>: identifier <strong>name</strong>; field type <strong>textLine </strong>(<strong>Required</strong> / <strong>Searchable</strong> / <strong>Translatable</strong>)</li><li><strong>Description</strong>: identifier <strong>description</strong>; field type <strong>Rich Text </strong>(<strong>Searchable</strong> / <strong>Translatable</strong>)</li><li><strong>Photo</strong>: identifier <strong>photo</strong>; field type <strong>Image </strong>(<strong>Required</strong>)</li><li><strong>Photo Legend</strong>: identifier <strong>legend</strong>; field type <strong>Rich Text </strong>(<strong>Searchable</strong> / <strong>Translatable</strong>)</li><li><strong>Place</strong>: identifier <strong>place</strong>; field type <strong>MapLocation</strong><strong> </strong>(<strong>Required</strong> / <strong>Searchable</strong>)</li></ul><p> </p><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="e01f300d-a636-4f85-a19d-1963a0277596" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>The <strong>content name pattern</strong> defines how the name and URL part of Content items of this type will be built. It may include static strings, as well as references to field definitions, using their identifier.</p><p class="confluence-link">The value of the fields referenced in the pattern will be used to build the name. Most Field Types are able to render a textual representation of their value, but be aware that it is not implemented for some of them (<a class="confluence-link" href="../../display/DEVELOPER/Selection%2bField%2bType.html" data-linked-resource-id="31430539" data-linked-resource-version="3" data-linked-resource-type="page" data-linked-resource-default-alias="Selection Field Type" data-base-url="../../index.html">Selection Field Type</a>, <a class="confluence-link" href="../../display/DEVELOPER/Relation%2bField%2bType.html" data-linked-resource-id="31430533" data-linked-resource-version="4" data-linked-resource-type="page" data-linked-resource-default-alias="Relation Field Type" data-base-url="../../index.html">Relation Field Type</a>, <a class="confluence-link" href="../../display/DEVELOPER/RelationList%2bField%2bType.html" data-linked-resource-id="31430535" data-linked-resource-version="5" data-linked-resource-type="page" data-linked-resource-default-alias="RelationList Field Type" data-base-url="../../index.html">RelationList Field Type</a>).</p></td></tr></table><p>Now, validate the Content Type creation form. It will save the Point Of Interest Content Type.<br />Create some Points Of Interest in the Content tree.</p><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="9f14d979-2d9b-40c4-b36f-c8193bb52cf0" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd35c.png?definition=e2luZm99&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Note that you will need pictures (for the Photo, the image Field) to represent them.</p></td></tr></table><h2>Edit the Ride Content Type</h2><p> Now edit the Ride in order to add a Content Relation Multiple between the two Content Types.</p><p style="text-align: center;"><br /><img class="confluence-embedded-image" height="400" width="547" confluence-query-params="effects=border-simple,blur-border" src="../../download/attachments/31431852/adding-pois-to-the-ride-content-type376b.jpg?version=1&amp;modificationDate=1482170740000&amp;api=v2&amp;effects=border-simple,blur-border" data-image-src="/download/attachments/31431852/adding-pois-to-the-ride-content-type.png?version=1&amp;modificationDate=1482170740000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="32869544" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="adding-pois-to-the-ride-content-type.png" data-base-url="https://doc.ez.no" data-linked-resource-content-type="image/png" data-linked-resource-container-id="31431852" data-linked-resource-container-version="36" title="Developer > Step 1 - Display content of a Ride > adding-pois-to-the-ride-content-type.png" data-location="Developer > Step 1 - Display content of a Ride > adding-pois-to-the-ride-content-type.png" data-image-height="475" data-image-width="669"><br /><em>Adding a relation between the Ride and the Points of Interest using the Content Relation Multiple</em></p><p>Then link some Points Of Interests to a Ride in the Admin interface.</p><h1>Ride view improvements</h1><h2>Display the list of POI</h2><p><span style="color: rgb(51,51,51);">By default, there are only 4 variables in a view: <code>noLayout</code>, <code>viewbaseLayout</code>, <code>content</code> and <code>location</code>.</span></p><p>It is possible to inject whatever variable you want in a specific view.</p><table class="wysiwyg-macro" data-macro-name="tip" data-macro-id="36c64ea2-c2b9-440b-b17f-1695f707faf0" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7f8c.png?definition=e3RpcH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p class="confluence-link">You will find more info here: <a class="confluence-link" href="../../display/DEVELOPER/Content%2bRendering.html#ContentRendering-Customcontrollers" data-anchor="Customcontrollers" data-linked-resource-id="31429679" data-linked-resource-version="70" data-linked-resource-type="page" data-linked-resource-default-alias="Content Rendering#Customcontrollers" data-base-url="../../index.html">Custom controllers</a> and <a class="confluence-link" href="../../display/DEVELOPER/Content%2bRendering.html#ContentRendering-Viewproviderconfiguration" data-anchor="Viewproviderconfiguration" data-linked-resource-id="31429679" data-linked-resource-version="70" data-linked-resource-type="page" data-linked-resource-default-alias="Content Rendering#Viewproviderconfiguration" data-base-url="../../index.html">View provider configuration</a>.</p></td></tr></table><h2>Create your Point of Interest line view</h2><p>Now, we need to create the line view for Point of Interest.</p><p>Declare a new override rule into your <code>app/config/ezplatform.yml</code>:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="87291eea-aeda-4344-9386-024ff6f8dba8" data-macro-parameters="language=js|title=ezplatform.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingd7f9.png?definition=e2NvZGU6bGFuZ3VhZ2U9anN8dGl0bGU9ZXpwbGF0Zm9ybS55bWx9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>    system:
        default:
            content_view:
                #full views here
                line:
                    line_point_of_interest:
                        template: 'line/point_of_interest.html.twig'
                        match:
                            Identifier\ContentType: ['point_of_interest']</pre></td></tr></table><p>Create your template for the line view of a Point of Interest <code>app/Resources/views/line/point_of_interest.html.twig</code>:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="dcda13c8-c5ad-491c-8794-9733cd5b4830" data-macro-parameters="language=xml|linenumbers=true|title=point_of_interest.html.twig" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingdd62.png?definition=e2NvZGU6bGFuZ3VhZ2U9eG1sfHRpdGxlPXBvaW50X29mX2ludGVyZXN0Lmh0bWwudHdpZ3xsaW5lbnVtYmVycz10cnVlfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;section>
&lt;div class="col-xs-4 photos-box">
  &lt;a href="#bikeModal{{ content.id }}" class="portfolio-link" data-toggle="modal">
    &lt;div class="caption">
      &lt;div class="caption-content">
        &lt;i class="fa fa-search-plus fa-3x">&lt;/i>
      &lt;/div>
    &lt;/div>
    {{ ez_render_field( content, 'photo', { parameters: { 'alias': 'small'},
    attr: { 'class': 'img-responsive img-rounded', 'alt':'' }}) }}
    {#&lt;img src="images/lyon.png" class="img-responsive img-rounded" alt="">#}
  &lt;/a>
&lt;/div>

{# MODAL #}
&lt;div class="bike-modal modal fade" id="bikeModal{{ content.id }}" tabindex="-1" role="dialog" aria-hidden="true">
  &lt;div class="modal-content">
    &lt;div class="close-modal" data-dismiss="modal">
      &lt;div class="lr">
        &lt;div class="rl">
        &lt;/div>
      &lt;/div>
    &lt;/div>
    &lt;div class="container">
      &lt;div class="row">
        &lt;div class="col-xs-8 col-xs-offset-2">
          &lt;div class="modal-body text-center">
            &lt;h2>Photo: {{ ez_content_name( content ) }}&lt;/h2>
            &lt;hr class="featurette-divider">
            {{ ez_render_field( content, 'photo', { parameters: { 'alias': 'large'},
            attr: { 'class': 'img-responsive img-rounded' }}) }}
            {#&lt;img src="images/lyon.png" class="img-responsive img-centered img-rounded" alt="">#}
            {{ ez_render_field( content, 'description', { attr: { 'class': 'padding-box text-justify' }}) }}
          &lt;/div>
        &lt;/div>
      &lt;/div>
    &lt;/div>
  &lt;/div>
&lt;/div>
&lt;/section></pre></td></tr></table><h2>Integrate the Points of Interest in the Ride view</h2><h3>Create the RideController</h3><p>In the AppBundle directory, create a PHP file : <code>/src/AppBundle/Controller/RideController.php</code></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="c8e75c59-e0f2-424c-872e-5868c484542b" data-macro-parameters="language=php|linenumbers=true|theme=RDark|title=/src/AppBundle/Controller/RideController.php" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading9058.png?definition=e2NvZGU6bGFuZ3VhZ2U9cGhwfHRoZW1lPVJEYXJrfHRpdGxlPS9zcmMvQXBwQnVuZGxlL0NvbnRyb2xsZXIvUmlkZUNvbnRyb2xsZXIucGhwfGxpbmVudW1iZXJzPXRydWV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;?php
namespace AppBundle\Controller;
use eZ\Publish\API\Repository\Values\Content\Query;
use eZ\Publish\API\Repository\Values\Content\Query\Criterion;
use eZ\Bundle\EzPublishCoreBundle\Controller;
use eZ\Publish\API\Repository\Values\Content\Query\SortClause;
use eZ\Publish\Core\Repository\Values\Content\Location;
class RideController extends Controller
{
  /**
   * Action used to display a ride
   *  - Adds the list of all related Points of interest to the response.
   *
   * @param Location $location
   * @param $viewType
   * @param bool $layout
   * @param array $params
   * @return mixed
   */
  public function viewRideWithPOIAction(Location $location, $viewType, $layout = false, array $params = array())
  {
    $repository = $this->getRepository();
    $contentService = $repository->getContentService();
    $currentLocation = $location;
    $currentContent = $contentService->loadContentByContentInfo($currentLocation->getContentInfo());
    $pointOfInterestListId = $currentContent->getFieldValue('pois'); //points of interest
    $pointOfInterestList = array();
    foreach ($pointOfInterestListId->destinationContentIds as $pointId)
    {
      $pointOfInterestList[$pointId] = $contentService->loadContent($pointId);
    }
    return $this->get('ez_content')->viewLocation(
      $location->id,
      $viewType,
      $layout,
      array('pointOfInterestList' => $pointOfInterestList) + $params
    );
  }
}</pre></td></tr></table><p>Update the <code>/app/config/ezplatform.yml</code> file to mention the RideController</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="8bfd3dcf-5e39-48bc-b645-39994537c112" data-macro-parameters="language=xml|theme=RDark|title=/app/config/ezplatform.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingf68c.png?definition=e2NvZGU6bGFuZ3VhZ2U9eG1sfHRoZW1lPVJEYXJrfHRpdGxlPS9hcHAvY29uZmlnL2V6cGxhdGZvcm0ueW1sfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>        default:
            content_view:
                full:
                    full_ride:
                        template: "full/ride.html.twig"
                        controller: "AppBundle:Ride:viewRideWithPOI"
                        match:
                            Identifier\ContentType: "ride"</pre></td></tr></table><h3>Add the Point Of Interest in the Ride full view</h3><p>Add the following lines (at the end of the Ride full view file, before the closing tag</p><p><code>{% endblock %}</code></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="5e8195a0-a1fd-48c5-9610-6ec9b59ce5ba" data-macro-parameters="language=xml|theme=RDark|title=/app/Resources/views/full/ride.html.twig" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading5c7c.png?definition=e2NvZGU6bGFuZ3VhZ2U9eG1sfHRoZW1lPVJEYXJrfHRpdGxlPS9hcHAvUmVzb3VyY2VzL3ZpZXdzL2Z1bGwvcmlkZS5odG1sLnR3aWd9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>&lt;section>
&lt;div class="col-xs-4 photos-box">
  &lt;a href="#bikeModal{{ content.id }}" class="portfolio-link" data-toggle="modal">
    &lt;div class="caption">
      &lt;div class="caption-content">
        &lt;i class="fa fa-search-plus fa-3x">&lt;/i>
      &lt;/div>
    &lt;/div>
    {{ ez_render_field( content, 'photo', { parameters: { 'alias': 'small'},
    attr: { 'class': 'img-responsive img-rounded', 'alt':'' }}) }}
    {#&lt;img src="images/lyon.png" class="img-responsive img-rounded" alt="">#}
  &lt;/a>
&lt;/div>

{# MODAL #}
&lt;div class="bike-modal modal fade" id="bikeModal{{ content.id }}" tabindex="-1" role="dialog" aria-hidden="true">
  &lt;div class="modal-content">
    &lt;div class="close-modal" data-dismiss="modal">
      &lt;div class="lr">
        &lt;div class="rl">
        &lt;/div>
      &lt;/div>
    &lt;/div>
    &lt;div class="container">
      &lt;div class="row">
        &lt;div class="col-xs-8 col-xs-offset-2">
          &lt;div class="modal-body text-center">
            &lt;h2>Photo: {{ ez_content_name( content ) }}&lt;/h2>
            &lt;hr class="featurette-divider">
            {{ ez_render_field( content, 'photo', { parameters: { 'alias': 'large'},
            attr: { 'class': 'img-responsive img-rounded' }}) }}
            {#&lt;img src="images/lyon.png" class="img-responsive img-centered img-rounded" alt="">#}
            {{ ez_render_field( content, 'description', { attr: { 'class': 'padding-box text-justify' }}) }}
          &lt;/div>
        &lt;/div>
      &lt;/div>
    &lt;/div>
  &lt;/div>
&lt;/div>
&lt;/section></pre></td></tr></table><p> </p><p>Then check the Ride page again to see the Points of Interest !</p><p>Remember: http://&lt;yourhost&gt;/view/content/&lt;ContentId&gt;/&lt;language&gt;/full/true/&lt;LocationId&gt;</p><p> </p><table class="wysiwyg-macro" data-macro-name="section" data-macro-id="c4fa284c-17bf-4f49-a2cb-8e24b51b23de" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading83a9.png?definition=e3NlY3Rpb259&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><table class="wysiwyg-macro" data-macro-name="column" data-macro-id="e9b6d2c1-69ea-46b3-abf9-67fc1a477486" data-macro-parameters="width=50%" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading99b3.png?definition=e2NvbHVtbjp3aWR0aD01MCV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><span class="char" title="Leftwards Black Arrow">⬅</span> Previous: <a class="confluence-link" href="../../display/DEVELOPER/Part%2b2_%2bWorking%2bon%2bthe%2bRide.html" data-linked-resource-id="31431613" data-linked-resource-version="3" data-linked-resource-type="page" data-linked-resource-default-alias="Part 2: Working on the Ride" data-base-url="../../index.html">Working on the Ride introduction page</a></p></td></tr></table><table class="wysiwyg-macro" data-macro-name="column" data-macro-id="dac54d02-e5ff-4029-980d-d782ad78a85a" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading16cd.png?definition=e2NvbHVtbn0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p class="confluence-link" style="text-align: right;">Next: <a class="confluence-link" href="../../display/DEVELOPER/Step%2b2%2b-%2bDisplay%2bthe%2blist%2bof%2bRides%2bon%2bthe%2bhomepage.html" data-linked-resource-id="32866555" data-linked-resource-version="3" data-linked-resource-type="page" data-linked-resource-default-alias="Step 2 - Display the list of Rides on the homepage" data-base-url="../../index.html">Step 2 - Display the list of Rides on the homepage</a> <span class="confluence-link" title="Black Rightwards Arrow">➡</span></p></td></tr></table></td></tr></table><p> </p><p> </p></div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
<table class="wysiwyg-macro" data-macro-name="panel" data-macro-id="d8c77d99-57aa-4735-a392-c4f56fe8f2c9" data-macro-parameters="borderColor=#f58220|borderWidth=2|title=Tutorial path" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingc82d-2.png?definition=e3BhbmVsOmJvcmRlckNvbG9yPSNmNTgyMjB8Ym9yZGVyV2lkdGg9Mnx0aXRsZT1UdXRvcmlhbCBwYXRofQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><img class="editor-inline-macro" src="../servlet/confluence/placeholder/macroc62c.png?definition=e3BhZ2V0cmVlOnJvb3Q9QnVpbGRpbmcgYSBCaWN5Y2xlIFJvdXRlIFRyYWNrZXIgaW4gZVogUGxhdGZvcm19&amp;locale=en_GB&amp;version=2" data-macro-name="pagetree" data-macro-id="7d51f1f5-9dd9-4cae-8706-cb345ecc61e5" data-macro-parameters="root=Building a Bicycle Route Tracker in eZ Platform" data-macro-schema-version="1"></p></td></tr></table></div>
</div>
</div>
</div>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=31431852 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 10:58:43 GMT -->
</html>
