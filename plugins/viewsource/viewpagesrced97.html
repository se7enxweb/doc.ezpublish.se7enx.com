                    
    
                    
    
                    
    
<!DOCTYPE html>
<html>
    
<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=31429544 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:37:43 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View Source</title>
        <link rel="canonical" href="../../pages/viewpageed97.html?pageId=31429544" />
        <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"\"";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/1b9968ac17721e3a6947d14e3a43c3f8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch9c16.css?build-number=5983" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/89/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/f3685658010e413141854089096800b5/_/download/contextbatch/css/plugin.viewsource/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/df762e50bc83a9608020a1ff1476cda6-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/5a0f37b8e5a58a48983bc1f25fb099f6/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/5714bd5a5c86641cad10106916cda7c8-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/49f5f7dfc888d48bff618d087d8044cc/_/download/contextbatch/css/editor-content/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/6/_/styles/colors74cd.css?spaceKey=DEVELOPER" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5983/f3e491afc761ac0a6981cfa3dcbc04fc7e88c149.16/6/_/styles/custom74cd.css?spaceKey=DEVELOPER" media="all">

    </head>

    <body class="mceContentBody aui-theme-default wiki-content fullsize">
        <p>&nbsp;</p>         <div class="contentLayout2">
<div class="columnLayout two-right-sidebar" data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<table class="wysiwyg-macro" data-macro-name="warning" data-macro-id="c9ba152c-c427-47a1-919d-bb405ac773e6" data-macro-parameters="title=Beta" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading9f5d.png?definition=e3dhcm5pbmc6dGl0bGU9QmV0YX0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p>Instructions and Tools <em>(docker images, Dockerfile, .env file, docker-compose files, scripts, etc.)</em> described on this page are currently in Beta for community testing &amp; contribution, and might change without notice.</p></td></tr></table><p> </p><blockquote><p>Docker allows you to package an application with all of its dependencies into a standardized unit for software development. – Docker.com</p></blockquote><p>Using Docker images, we can package up all the executables, dependencies, and files required to run eZ Platform. We're in the process of preparing images for public use, and you can follow along on related epic tracking this <img class="editor-inline-macro" src="../servlet/confluence/placeholder/macrof8bd.png?definition=e2ppcmE6a2V5PUVaUC0yNTY2NX0=&amp;locale=en_GB" data-macro-name="jira" data-macro-id="71af76f3-72df-43ee-8fc0-f6bacee4b790" data-macro-parameters="key=EZP-25665|server=eZ Systems JIRA tracker|serverId=841cf523-cc54-30bc-bc5d-89e63192498a" data-macro-schema-version="1"></p><p><em>What is described on this page has gone through several iterations to try to become as simple as possible. It uses plain Docker and Docker Compose to avoid having to learn anything specific with these tools, and it uses official docker images to take advantage of continued innovation by Docker Inc. and the ecosystem. We will expand on these tools as both images, and Docker itself, matures. </em></p><p>If you would like to join our efforts <em>(development, documentation, feedback, and/or testing)</em>, <a href="http://ez-community-on-slack.herokuapp.com/">sign up</a> for our <a href="http://ezcommunity.slack.com/">Community Slack</a> and join the conversation in the <strong>#docker-tools</strong> channel.</p><h3>Demo usage</h3><table class="wysiwyg-macro" data-macro-name="info" data-macro-id="c38e2671-7082-446b-86a3-0fc1cd5bd8e1" data-macro-parameters="title=Project use" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading9df3.png?definition=e2luZm86dGl0bGU9UHJvamVjdCB1c2V9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body">For usage with your own project based on eZ Platform or eZ Enterprise starting with v1.4.0 you'll find documentation for project use in <code>doc/docker-compose/README.md</code>.</td></tr></table><p>What follows below is instructions for setting up a simple single-server instance of eZ Platform demo using Docker. This is here shown on your own machine, however using <a href="https://docs.docker.com/machine/">Docker Machine</a> you may point this to a variety of servers and services.</p><p>Note: For running Docker in production you'll need to handle a few more things we are not covering here yet, some of which are:</p><ul style="list-style-type: square;"><li>Handling persistence, both database and web/var files</li><li>Ideally also scale out to offer redundancy, and for that use memcached/redis and Varnish in front</li><li>Handle health of containers and configure setup if something goes down</li><li>...</li></ul><p><table class="wysiwyg-macro" data-macro-name="show-if" data-macro-id="9e36a406-f787-45d2-8f3b-28d6e76b3be9" data-macro-parameters="atlassian-macro-output-type=INLINE|group=eZ Users" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading7e9d.png?definition=e3Nob3ctaWY6YXRsYXNzaWFuLW1hY3JvLW91dHB1dC10eXBlPUlOTElORXxncm91cD1lWiBVc2Vyc30&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><table class="wysiwyg-macro" data-macro-name="section" data-macro-id="691d21d7-66bd-47c9-9a84-20dd4de3c6dd" data-macro-parameters="border=true" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading2871.png?definition=e3NlY3Rpb246Ym9yZGVyPXRydWV9&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="RICH_TEXT"><tr><td class="wysiwyg-macro-body"><p><span><span style="color: rgb(255,0,0);">INTERNAL</span> Work in progress, need to move entrypoint so it can be loaded.</span></p><p><span><br /></span></p><p><span>First place the two files below in a empty folder:</span></p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="39e6936e-4977-4bb6-b66f-218049577262" data-macro-parameters="title=.env" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-headingde89.png?definition=e2NvZGU6dGl0bGU9LmVudn0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>SYMFONY_ENV=prod
SYMFONY_DEBUG=0
DATABASE_USER=ezp
DATABASE_PASSWORD=SetYourOwnPassword
DATABASE_NAME=ezp</pre></td></tr></table><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="188aa7e0-e7b3-4bf5-a70c-f87655838240" data-macro-parameters="title=docker-compose.yml" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading6c53.png?definition=e2NvZGU6dGl0bGU9ZG9ja2VyLWNvbXBvc2UueW1sfQ&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre>version: '2'

services:
  app:
    image: ezsystems/ezplatform-demo:latest
    depends_on:
     - db
    environment:
     - SYMFONY_ENV
     - SYMFONY_DEBUG
     - DATABASE_USER
     - DATABASE_PASSWORD
     - DATABASE_NAME
     - DATABASE_HOST=db

  web:
    image: nginx:stable
    volumes_from:
     - app:ro
    ports:
     - "8080:80"
    environment:
     - SYMFONY_ENV
     - MAX_BODY_SIZE=20
     - FASTCGI_PASS=app:9000
     - TIMEOUT=190
     - DOCKER0NET
    command: /bin/bash -c "cd /var/www &amp;&amp; cp -a doc/nginx/ez_params.d /etc/nginx &amp;&amp; bin/vhost.sh --template-file=doc/nginx/vhost.template > /etc/nginx/conf.d/default.conf &amp;&amp; nginx -g 'daemon off;'"

  db:
    image: mariadb:10.0
    #volumes:
    # - ./entrypoint/mysql:/docker-entrypoint-initdb.d/:ro
    environment:
     - MYSQL_RANDOM_ROOT_PASSWORD=1
     - MYSQL_USER=$DATABASE_USER
     - MYSQL_PASSWORD=$DATABASE_PASSWORD
     - MYSQL_DATABASE=$DATABASE_NAME
     - TERM=dumb
 </pre></td></tr></table><p> </p><p>Then execute:</p><table class="wysiwyg-macro" data-macro-name="code" data-macro-id="6ae3204c-f83e-4257-82e6-0f25b674150f" data-macro-parameters="language=bash" data-macro-schema-version="1" style="background-image: url(../servlet/confluence/placeholder/macro-heading174f.png?definition=e2NvZGU6bGFuZ3VhZ2U9YmFzaH0&amp;locale=en_GB&amp;version=2); background-repeat: no-repeat;" data-macro-body-type="PLAIN_TEXT"><tr><td class="wysiwyg-macro-body"><pre># If you have used same terminal for testing docker already, then first: unset COMPOSE_FILE SYMFONY_ENV SYMFONY_DEBUG
 
docker-compose up -d --force-recreate

docker-compose exec --user www-data app /bin/sh -c "php /scripts/wait_for_db.php; php app/console ezplatform:install demo"</pre></td></tr></table><p>App should now be up on localhost:8080</p></td></tr></table></td></tr></table> </p><p> </p><h3>Known issues</h3><p>Incomplete list of known bugs:</p><p><img class="editor-inline-macro" src="../../download/resources/confluence.extra.jira/jira-table.jpg" data-macro-name="jira" data-macro-id="869a3a7f-b95a-4732-925f-556d24fa8970" data-macro-parameters="columns=key,summary|jqlQuery=component\=&quot;Deployment > Docker Containers&quot; AND issuetype\=Bug AND Resolution is Empty ORDER BY priority   |maximumIssues=20|server=eZ Systems JIRA tracker|serverId=841cf523-cc54-30bc-bc5d-89e63192498a" data-macro-schema-version="1"></p><p> </p></div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
<h4>Related:</h4><ul><li>Documentation:<ul><li><s><a class="confluence-link" href="../../login9552.html?pageId=32113397" data-linked-resource-id="32113397" data-linked-resource-version="3" data-linked-resource-type="page" data-linked-resource-default-alias="Installation Using Docker" data-base-url="../../index.html">Installation Using Docker</a></s></li></ul></li><li>Docker images:<ul><li><a href="https://hub.docker.com/r/ezsystems/php/">ezsystems/php</a></li><li>ezsystems/ezplatform-demo</li></ul></li></ul><p> </p><p><img class="confluence-embedded-image confluence-thumbnail image-center" height="150" src="../../download/thumbnails/32113421/docker-logo0a80.png?version=1&amp;modificationDate=1466096645000&amp;api=v2" data-image-src="/download/attachments/32113421/docker-logo.png?version=1&amp;modificationDate=1466096645000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="32113469" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="docker-logo.png" data-base-url="https://doc.ez.no" data-linked-resource-content-type="image/png" data-linked-resource-container-id="32113421" data-linked-resource-container-version="28" title="Developer > eZ Platform v1.4.0 Release notes > docker-logo.png" data-location="Developer > eZ Platform v1.4.0 Release notes > docker-logo.png" data-image-height="261" data-image-width="459"></p></div>
</div>
</div>
</div>
        <p>&nbsp;</p>
    </body>

<!-- Mirrored from doc.ez.no/plugins/viewsource/viewpagesrc.action?pageId=31429544 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 31 Jan 2017 09:37:46 GMT -->
</html>
